---
title: | 
  ![](../../.common-media/logo-unitn-ardeeno-512.png){width=10cm}

  Ardeeno WebApp
subtitle: |
  T41-SE22

  D3-Documento di Architettura

  v1.0
author: [alessandro.manfucci@studenti.unitn.it, enrico.cescato@studenti.unitn.it ,m.sottocornola-1@studenti.unitn.it]
date: "06-12-2022"
lang: it
format:
  pdf:
    include-in-header:
      text: |
        \usepackage{graphicx}
        \usepackage{wrapfig}
    documentclass: article
    classoption: titlepage
    toc: true
    toc-title: Indice
    papersize: a4
    number-sections: true
    geometry:
    - top=1in
    - bottom=1in
    - right=1in
    - left=1in
---

\pagebreak
# Abstract {.unlisted .unnumbered}

Questo documento, a partire dalle componenti precedentemente definite, descrive l'architettura in classi del sistema da realizzare. L'obiettivo è fornire al team di sviluppo una seconda -- e più dettagliata -- architettura del software da sviluppare. Si utilizza il diagramma delle classi UML e il linguaggio OCL (*Object Constraint Language*).

# Diagramma delle classi
Questo capitolo presenta il diagramma delle classi UML del sistema. In particolare si descrivono le singole classi nel loro scopo e contesto, raggruppandole secondo una certa correlazione logica.  
Per la cardinalità delle associazioni si utilizza la notazione *look-ahead*.

## Utente
L'Utente, oltre ad essere un attore, è anche un'importante risorsa del sistema da realizzare.

![Utente](./.media/utente.png){width=16cm fig-pos=H}

## Impianto

![Impianto](./.media/impianto.png){width=9cm fig-pos=H}

## Dipendente

![Dipendente](./.media/dipendente.png){width=16cm fig-pos=H}

## Heatmap

![Heatmap](./.media/heatmap.png){width=4cm fig-pos=H}

## Modello

![Modello](./.media/modello.png){width=12cm fig-pos=H}

## Classi *tipi*

![Classi tipi](./.media/tipi.png){width=16cm fig-pos=H}

## Classi *Managers*

![Classi Managers](./.media/managers.png){width=12cm fig-pos=H}

## Diagramma delle classi complessivo
Alla pagina successiva si trova il diagramma leggibile.

<!--concatenare il pdf!-->

![Anteprima diagramma delle classi complessivo](./.media/complessivo.png){width=16cm fig-pos=H}

\pagebreak
# Codice in OCL
Questo capitolo presenta particolari proprietà sugli attributi e sulle operazioni delle varie classi (invarianti, pre-condizioni e post-condizioni). Come nel capitolo precedente, le classi sono raggruppate secondo una certa correlazione logica.  
Si utilizza il linguaggio OCL, che estende lo standard UML.

## Utente

![Utente](./.media/utente_ocl.png){width=16cm fig-pos=H}

## Impianto

![Impianto](./.media/impianto_ocl.png){width=16cm fig-pos=H}

## Dipendente

![Dipendente](./.media/dipendente_ocl.png){width=16cm fig-pos=H}

## Heatmap

![Heatmap](./.media/heatmap_ocl.png){width=8cm fig-pos=H}

## Modello

![Modello](./.media/modello_ocl.png){width=16cm fig-pos=H}

## Classi *tipi*

![Classi tipi](./.media/tipi_ocl.png){width=8cm fig-pos=H}

## Autenticazione utente e dimissione dipendente dell'azienda
Un utente può effettuare l'autenticazione attraverso il metodo *login()* solo se l'indirizzo email inserito in fase di registrazione è stato confermato: l'attributo *emailConfermata* deve avere come valore *true*; altrimenti, l'autenticazione non è consentita.

<!--codice ocl dell'utente-->

Un dipendente dell'azienda può effettuare l'autenticazione attraverso il metodo *login()* solo se lo stato del dipendente è attivo: l'attributo *isAttivo* deve avere come valore *true*; altrimenti, l'autenticazione non è consentita.

<!--codice ocl del dipendente-->

Un amministratore può dimettere un dipendente dell'azienda se:

- pre-condizione: il dipendente è in stato attivo e quindi l'attributo *isAttivo* ha come valore *true*;
- post-condiozione: il dipendente è in stato dimesso e quindi l'attributo *isAttivo* ha come valore *false*.

<!--codice ocl dell'amministratore-->

## Installazione e dismissione sensore
Un sensore può essere installato su un impianto se:

- pre-condizione: il sensore non appartiene a nessun impianto e non ha associato coordinate;
- post-condizione: il sensore appartiene ad un determinato impianto e ha associato le coordinate di installazione del sensore.

<!--codice ocl di installazione sensore-->

Un sensore può essere dismesso da un impianto se:

- pre-condizione: il sensore è in stato attivo e quindi l'attributo *dateDismissione* ha come valore *null*;
- post-condizione: il sensore è in stato dismesso e quindi l'attributo *dateDismissione* ha come valore la data di dismissione del sensore.

<!--codice ocl di dismissione sensore-->

## Data e conclusione intervento
La data di richiesta di un interveto deve essere antecedente alla data di conclusione.

<!--codice ocl data intervento-->

Un intervento può essere concluso se:

- pre-condizione: l'intervento non ha associato la data di conclusione e il resoconto;
- post-condizione: l'intervento ha associato la data di conclusione (giorno in cui il metodo *concludi()* viene eseguito) e il resoconto.

<!--codice ocl di concludi()-->

## Modello, costo e numero di sedi
Gli attributi *costo*, *superficie*, *numSensori* e il numero di *parametri* di un modello di impianto devono avere un valore maggiore di zero.

<!--codice ocl del modello-->

Un costo deve essere maggiore di zero: gli attributi *unit* o *cent* (o entrambi) devono essere maggiori di zero.

<!--modificare il codice ocl: posso avere 0 come valore di unit e N come valore di cent; quindi mettere OR al posto di AND;
inserire il codice ocl del costo-->

L'azienda deve avere almeno una sede.

<!--codice ocl sedi-->

## Diagramma delle classi complessivo con codice OCL
Alla pagina successiva si trova il diagramma leggibile.

<!--concatenare il pdf!-->

![Anteprima diagramma delle classi complessivo con codice OCL](./.media/complessivo_ocl.png){width=16cm fig-pos=H}
